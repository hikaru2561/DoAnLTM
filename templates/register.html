<h2>Đăng ký qua WebSocket</h2>
<form id="registerForm">
    <input name="name" placeholder="Tên"><br>
    <input name="username" placeholder="Username"><br>
    <input name="email" placeholder="Email"><br>
    <input name="phone" placeholder="SĐT"><br>
    <input type="date" name="birthday"><br>
    <input name="country" placeholder="Quốc gia"><br>
    <select name="sex"><option value="1">Nam</option><option value="0">Nữ</option></select><br>
    <input type="password" name="password" placeholder="Mật khẩu"><br>
    <button type="submit">Đăng ký</button>
</form>
<div id="registerResult"></div>

<script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
<script>
    const socket = io();
    const form = document.getElementById('registerForm');

    form.addEventListener('submit', e => {
        e.preventDefault();
        const formData = new FormData(form);
        const data = Object.fromEntries(formData.entries());
        socket.emit('register', data);
    });

    socket.on('register_response', (res) => {
        const result = document.getElementById('registerResult');
        if (res.status === 'success') {
            result.innerText = res.message;
            setTimeout(() => window.location.href = "/login", 1000);
        } else {
            result.innerText = "❌ " + res.message;
        }
    });
</script>
